<html ng-app="sampleApp">

<head>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
    <script src="//cdn.firebase.com/js/client/2.0.6/firebase.js"></script>
    <script src="//cdn.firebase.com/libs/angularfire/0.9.2/angularfire.min.js"></script>
    <script src="//cdn.firebase.com/libs/firebase-util/0.1.0/firebase-util.min.js"></script>

    <script type="text/javascript">
        var app = angular.module("sampleApp", ["firebase"]);
        var fb = new Firebase('https://glowtest.firebaseio.com/');

        app.controller("SampleCtrl", function($scope, $firebase) {
            var ref = new Firebase("https://glowtest.firebaseio.com/");
            // create an AngularFire reference to the data
            //var sync = $firebase(ref.child('users'));
            // download the data into a local object
            //$scope.users = sync.$asArray();

            $scope.users = $firebase(Firebase.util.join(ref.child('users'), ref.child('lists')
            //,            ref.child('exercisesLog')
            )).$asArray();
            console.log($scope.users);
        });
    </script>
</head>

<body ng-controller="SampleCtrl">
    <h3>merge data</h3> Users
    <ul>
        <li ng-repeat="user in users">
            {{user.name}} Lists
            <ul>
                <li ng-repeat="list in user.lists">
                    {{list.title}}  - {{list}}
                    
                </li>
            </ul>
        </li>
    </ul>


    <script type="text/javascript">
        var fb = new Firebase('https://glowtest.firebaseio.com/');
        // reset demo data on each page load
        //fb.set({"lists":{"google:104531750561360041649":{"list1":{"title":"Example","exercises":{"exercise1":"true"}}},"user2":{"someList":{"title":"some title","exercises":{"exercise3":"true"}}}},"users":{"google:104531750561360041649":{"name":"Hanan"},"user2":{"name":"Bob"}},"exercises":{"exercise1":{"category":"Tai Ji Quan","name":"Tai Ji Quan Form"},"exercise2":{"category":"Xing Yi Quan","name":"Five Elements"},"exercise3":{"category":"some category","name":"some name"}},"exercisesLog":{"google:104531750561360041649v":{"list1":{"exercise1":{"-JgHvtSW9abekhaAQ-_q":{"time":1421951866903},"-JgHvs8ug2RmK_CaQ7Dg":{"time":1421951861555}}},"list2":{"exercise3":{"-JQjT7REctmFfOAoGI6d":{"time":1421679150429}}}}}});
        //fb.set({"lists":{"google:104531750561360041649":{"lists":{"list1":{"title":"Example","exercises":{"exercise1":"true"}}}},"user2":{"lists":{"someList":{"title":"some title","exercises":{"exercise3":"true"}}}}},"users":{"google:104531750561360041649":{"name":"Hanan"},"user2":{"name":"Bob"}},"exercises":{"exercise1":{"category":"Tai Ji Quan","name":"Tai Ji Quan Form"},"exercise2":{"category":"Xing Yi Quan","name":"Five Elements"},"exercise3":{"category":"some category","name":"some name"}},"exercisesLog":{"google:104531750561360041649v":{"list1":{"exercise1":{"-JgHvtSW9abekhaAQ-_q":{"time":1421951866903},"-JgHvs8ug2RmK_CaQ7Dg":{"time":1421951861555}}},"list2":{"exercise3":{"-JQjT7REctmFfOAoGI6d":{"time":1421679150429}}}}}});
        //fb.set({"users":{"google:104531750561360041649":{"name":"Hanan"},"user2":{"name":"Bob"}},"exercises":{"exercise1":{"category":"Tai Ji Quan","name":"Tai Ji Quan Form"},"exercise2":{"category":"Xing Yi Quan","name":"Five Elements"},"exercise3":{"category":"some category","name":"some name"}},"lists":{"google:104531750561360041649":{"lists":{"list1":{"title":"Example","exercises":{"exercise1":"true"}}}},"user2":{"lists":{"someList":{"title":"some title","exercises":{"exercise3":"true"}}}}},"exercisesLog":{"google:104531750561360041649v":{"lists":{"list1":{"exercise1":{"-JgHvtSW9abekhaAQ-_q":{"time":1421951866903},"-JgHvs8ug2RmK_CaQ7Dg":{"time":1421951861555}}},"list2":{"exercise3":{"-JQjT7REctmFfOAoGI6d":{"time":1421679150429}}}}}}});
        fb.set({"users":{"google:104531750561360041649":{"name":"Hanan"},"user2":{"name":"Bob"}},"exercises":{"exercise1":{"category":"Tai Ji Quan","name":"Tai Ji Quan Form"},"exercise2":{"category":"Xing Yi Quan","name":"Five Elements"},"exercise3":{"category":"some category","name":"some name"}},"lists":{"google:104531750561360041649":{"lists":{"list1":{"title":"Example","exercises":{"exercise1":"true"}}}},"user2":{"lists":{"someList":{"title":"some title","exercises":{"exercise3":"true"}}}}},"exercisesLog":{"google:104531750561360041649":{"lists":{"list1":{"exercises":{"exercise1":{"-JgHvtSW9abekhaAQ-_q":{"time":1421951866903},"-JgHvs8ug2RmK_CaQ7Dg":{"time":1421951861555}}}},"list2":{"exercises":{"exercise3":{"-JQjT7REctmFfOAoGI6d":{"time":1421679150429}}}}}}}});
    </script>
</body>

</html>
