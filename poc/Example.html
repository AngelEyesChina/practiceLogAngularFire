<html ng-app="sampleApp">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.0.6/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.9.0/angularfire.min.js"></script>
    <script type="text/javascript">
        var app = angular.module("sampleApp", ["firebase"]);

        // let's create a re-usable factory that generates the $firebaseAuth instance
        app.factory("Auth", ["$firebaseAuth", function($firebaseAuth) {
            var ref = new Firebase("https://glowing-inferno-4287.firebaseio.com/");
            //var ref = new Firebase("https://<replace-with-your-db-id>.firebaseio.com/");
            return $firebaseAuth(ref);
        }]);

        // and use it in our controller
        app.controller("SampleCtrl", ["$scope", "Auth","$timeout", function($scope, Auth, $timeout) {
            $scope.auth = Auth;
            $scope.auth.$onAuth(function(userData) {
                // $timeout needed for AngularFire 0.9.0
                // see https://github.com/firebase/angularfire/issues/510
                $timeout(function() {
                    $scope.user = userData;
                });
            });
        }]);
    </script>
</head>

<body ng-controller="SampleCtrl">
    <div ng-show="user">
        <p>Hello, {{ user.facebook.displayName }}</p>
        <button ng-click="auth.$unauth()">Logout</button>
    </div>
    <div ng-hide="user">
        <p>Welcome, please log in.</p>
        <button ng-click="auth.$authWithOAuthPopup('facebook')">Login</button>
    </div>
</body>

</html>
